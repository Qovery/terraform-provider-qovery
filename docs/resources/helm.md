# qovery_helm (Resource)

Provides a Qovery helm resource. This can be used to create and manage Qovery helm registry.


## Example
```terraform
resource "qovery_helm" "my_helm" {
  # Required
  environment_id               = qovery_environment.my_environment.id
  name                         = "test-helm"
  allow_cluster_wide_resources = false

  source = {
    helm_repository = {
      helm_repository_id = "5a4a2dd6-02e1-4e3a-a3cc-8ebb97e135a9"
      chart_name         = "httpbin"
      chart_version      = "1.0.0"
    }
  }

  values_override = {
    "set" = {
      "key1" = 6600
      "key2" = "values1"
    }
    "set_string" = {
      "s-key1" = "value1"
      "s-key2" = "value2"
    }
    "set_json" = {
      "j-key1" = "{}"
      "j-key2" = "{}"
    }
    file = {
      raw = {
        file1 = {
          content = "--- \n ssss"
        }
        file2 = {
          content = "a \n eee"
        }
      }
    }
  }



  # Optional
  auto_preview = "true"


  environment_variables = [
    {
      key   = "MY_TERRAFORM_HELM_VARIABLE"
      value = "MY_TERRAFORM_HELM_VARIABLE_VALUE"
    }
  ]
  environment_variable_aliases = [
    {
      key = "ENV_VAR_KEY_ALIAS"
      # the value of the alias must be the name of the aliased variable
      # e.g here it is an alias to the above declared environment variable "ENV_VAR_KEY"
      value = "ENV_VAR_KEY"
    }
  ]
  environment_variable_overrides = [
    {
      # the key of the override must be the name of the overridden variable
      # e.g here it is an override on a variable declared at project scope "SOME_PROJECT_VARIABLE"
      key   = "SOME_PROJECT_VARIABLE"
      value = "OVERRIDDEN_VALUE"
    }
  ]
  secrets = [
    {
      key   = "MY_TERRAFORM_HELM_SECRET"
      value = "MY_TERRAFORM_HELM_SECRET_VALUE"
    }
  ]
  secret_aliases = [
    {
      key = "SECRET_KEY_ALIAS"
      # the value of the alias must be the name of the aliased secret
      # e.g here it is an alias to the above declared secret "SECRET_KEY"
      value = "SECRET_KEY"
    }
  ]
  secret_overrides = [
    {
      # the key of the override must be the name of the overridden secret
      # e.g here it is an override on a secret declared at project scope "SOME_PROJECT_SECRET"
      key   = "SOME_PROJECT_SECRET"
      value = "OVERRIDDEN_VALUE"
    }
  ]
  deployment_restrictions = [
    {
      mode  = "MATCH"
      type  = "PATH"
      value = "path/or/file"
    }
  ]

  advanced_settings_json = jsonencode({
    # non exhaustive list, the complete list is available in Qovery API doc: https://api-doc.qovery.com/#tag/Helms/operation/getDefaultHelmAdvancedSettings
    # you can only indicate settings that you need to override
  })

  depends_on = [
    qovery_environment.my_environment,
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `allow_cluster_wide_resources` (Boolean) Allow this chart to deploy resources outside of this environment namespace (including CRDs or non-namespaced resources)
- `environment_id` (String) Id of the environment.
- `name` (String) Name of the helm.
- `source` (Attributes) Helm chart from a Helm repository or from a git repository (see [below for nested schema](#nestedatt--source))
- `values_override` (Attributes) Define your own overrides to customize the helm chart behaviour. (see [below for nested schema](#nestedatt--values_override))

### Optional

- `advanced_settings_json` (String) Advanced settings.
- `arguments` (Set of String) Helm arguments
- `auto_deploy` (Boolean) Specify if service will be automatically updated on every new commit on the branch.
- `auto_preview` (Boolean) Specify if the environment preview option is activated or not for this helm.
- `custom_domains` (Attributes Set) List of custom domains linked to this helm. (see [below for nested schema](#nestedatt--custom_domains))
- `deployment_restrictions` (Attributes Set) List of deployment restrictions (see [below for nested schema](#nestedatt--deployment_restrictions))
- `deployment_stage_id` (String) Id of the deployment stage.
- `environment_variable_aliases` (Attributes Set) List of environment variable aliases linked to this helm. (see [below for nested schema](#nestedatt--environment_variable_aliases))
- `environment_variable_overrides` (Attributes Set) List of environment variable overrides linked to this helm. (see [below for nested schema](#nestedatt--environment_variable_overrides))
- `environment_variables` (Attributes Set) List of environment variables linked to this helm. (see [below for nested schema](#nestedatt--environment_variables))
- `ports` (Attributes Map) List of ports linked to this helm. (see [below for nested schema](#nestedatt--ports))
- `secret_aliases` (Attributes Set) List of secret aliases linked to this helm. (see [below for nested schema](#nestedatt--secret_aliases))
- `secret_overrides` (Attributes Set) List of secret overrides linked to this helm. (see [below for nested schema](#nestedatt--secret_overrides))
- `secrets` (Attributes Set) List of secrets linked to this helm. (see [below for nested schema](#nestedatt--secrets))
- `timeout_sec` (Number) Helm timeout in seconds

### Read-Only

- `built_in_environment_variables` (Attributes Set) List of built-in environment variables linked to this helm. (see [below for nested schema](#nestedatt--built_in_environment_variables))
- `external_host` (String) The helm external FQDN host [NOTE: only if your helm is using a publicly accessible port].
- `id` (String) Id of the helm.
- `internal_host` (String) The helm internal host.

<a id="nestedatt--source"></a>
### Nested Schema for `source`

Optional:

- `git_repository` (Attributes) Git repository (see [below for nested schema](#nestedatt--source--git_repository))
- `helm_repository` (Attributes) Helm repositories can be private or public (see [below for nested schema](#nestedatt--source--helm_repository))

<a id="nestedatt--source--git_repository"></a>
### Nested Schema for `source.git_repository`

Required:

- `url` (String) Helm's source git repository URL

Optional:

- `branch` (String) Helm's source git repository branch
- `git_token_id` (String) The git token ID to be used
- `root_path` (String) Helm's source git repository root path


<a id="nestedatt--source--helm_repository"></a>
### Nested Schema for `source.helm_repository`

Required:

- `chart_name` (String) Chart name
- `chart_version` (String) Chart version
- `helm_repository_id` (String) helm repository id



<a id="nestedatt--values_override"></a>
### Nested Schema for `values_override`

Optional:

- `file` (Attributes) Define overrides by selecting a YAML file from a git repository (preferred) or by passing raw YAML files. (see [below for nested schema](#nestedatt--values_override--file))
- `set` (Map of String)
- `set_json` (Map of String)
- `set_string` (Map of String)

<a id="nestedatt--values_override--file"></a>
### Nested Schema for `values_override.file`

Optional:

- `git_repository` (Attributes) YAML file from a git repository (see [below for nested schema](#nestedatt--values_override--file--git_repository))
- `raw` (Attributes Map) Raw YAML files (see [below for nested schema](#nestedatt--values_override--file--raw))

<a id="nestedatt--values_override--file--git_repository"></a>
### Nested Schema for `values_override.file.git_repository`

Required:

- `branch` (String) YAML file git repository branch
- `paths` (Set of String) YAML files git repository paths
- `url` (String) YAML file git repository URL

Optional:

- `git_token_id` (String) The git token ID to be used


<a id="nestedatt--values_override--file--raw"></a>
### Nested Schema for `values_override.file.raw`

Required:

- `content` (String) content of the file




<a id="nestedatt--custom_domains"></a>
### Nested Schema for `custom_domains`

Required:

- `domain` (String) Your custom domain.
- `generate_certificate` (Boolean) Qovery will generate and manage the certificate for this domain.

Read-Only:

- `id` (String) Id of the custom domain.
- `status` (String) Status of the custom domain.
- `validation_domain` (String) URL provided by Qovery. You must create a CNAME on your DNS provider using that URL.


<a id="nestedatt--deployment_restrictions"></a>
### Nested Schema for `deployment_restrictions`

Required:

- `mode` (String) Can be EXCLUDE or MATCH
- `type` (String) Currently, only PATH is accepted
- `value` (String) Value of the deployment restriction

Read-Only:

- `id` (String) Id of the deployment restriction


<a id="nestedatt--environment_variable_aliases"></a>
### Nested Schema for `environment_variable_aliases`

Required:

- `key` (String) Name of the environment variable alias.
- `value` (String) Name of the variable to alias.

Optional:

- `description` (String) Description of the environment variable alias.

Read-Only:

- `id` (String) Id of the environment variable alias.


<a id="nestedatt--environment_variable_overrides"></a>
### Nested Schema for `environment_variable_overrides`

Required:

- `key` (String) Name of the environment variable override.
- `value` (String) Value of the environment variable override.

Optional:

- `description` (String) Description of the environment variable override.

Read-Only:

- `id` (String) Id of the environment variable override.


<a id="nestedatt--environment_variables"></a>
### Nested Schema for `environment_variables`

Required:

- `key` (String) Key of the environment variable.
- `value` (String) Value of the environment variable.

Optional:

- `description` (String) Description of the environment variable.

Read-Only:

- `id` (String) Id of the environment variable.


<a id="nestedatt--ports"></a>
### Nested Schema for `ports`

Required:

- `external_port` (Number) External port of the container.
	- Required if: `ports.publicly_accessible=true`.
	- Must be: `>= 1` and `<= 65535`.
- `internal_port` (Number) Internal port of the container.
	- Must be: `>= 1` and `<= 65535`.
- `is_default` (Boolean) If this port will be used for the root domain
- `service_name` (String)

Optional:

- `namespace` (String)
- `protocol` (String) Protocol used for the port of the container.
	- Can be: `GRPC`, `HTTP`.
	- Default: `HTTP`.


<a id="nestedatt--secret_aliases"></a>
### Nested Schema for `secret_aliases`

Required:

- `key` (String) Name of the secret alias.
- `value` (String) Name of the secret to alias.

Optional:

- `description` (String) Description of the secret alias.

Read-Only:

- `id` (String) Id of the secret alias.


<a id="nestedatt--secret_overrides"></a>
### Nested Schema for `secret_overrides`

Required:

- `key` (String) Name of the secret override.
- `value` (String, Sensitive) Value of the secret override.

Optional:

- `description` (String) Description of the secret override.

Read-Only:

- `id` (String) Id of the secret override.


<a id="nestedatt--secrets"></a>
### Nested Schema for `secrets`

Required:

- `key` (String) Key of the secret.
- `value` (String, Sensitive) Value of the secret.

Optional:

- `description` (String) Description of the secret.

Read-Only:

- `id` (String) Id of the secret.


<a id="nestedatt--built_in_environment_variables"></a>
### Nested Schema for `built_in_environment_variables`

Read-Only:

- `description` (String) Description of the environment variable.
- `id` (String) Id of the environment variable.
- `key` (String) Key of the environment variable.
- `value` (String) Value of the environment variable.
## Import
```shell
terraform import qovery_helm.my_helm "<helm_id>"
```