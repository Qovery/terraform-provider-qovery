# qovery_cluster (Resource)

Provides a Qovery cluster resource. This can be used to create and manage Qovery cluster.


## Example
```terraform
resource "qovery_cluster" "my_cluster" {
  # Required
  organization_id = qovery_organization.my_organization.id
  credentials_id  = qovery_aws_credentials.my_aws_creds.id
  name            = "test_terraform_provider"
  cloud_provider  = "AWS"
  region          = "eu-west-3"
  instance_type   = "T3A_MEDIUM"

  # Optional
  description       = "My cluster description"
  min_running_nodes = 3
  max_running_nodes = 10
  features = {
    vpc_subnet = "10.0.0.0/16"
  }
  routing_table = [
    {
      description = "RDS database peering"
      destination = "172.30.0.0/16"
      target      = "pcx-06f8f5512c91e389c"
    }
  ]

  advanced_settings_json = jsonencode({
    # non exhaustive list, the complete list is available in Qovery API doc: https://api-doc.qovery.com/#tag/Clusters/operation/getDefaultClusterAdvancedSettings
    # you can only indicate settings that you need to override
    "aws.vpc.flow_logs_retention_days" : 100,
    "aws.vpc.enable_s3_flow_logs" : true
  })

  state = "DEPLOYED"

  depends_on = [
    qovery_organization.my_organization,
    qovery_aws_credentials.my_aws_creds
  ]
}
```

You can find complete examples within these repositories:

* [Deploy an Application and Database within 3 environments](https://github.com/Qovery/terraform-examples/tree/main/examples/deploy-an-application-within-3-environments)
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_provider` (String) Cloud provider of the cluster.
	- Can be: `AWS`, `GCP`, `SCW`.
- `credentials_id` (String) Id of the credentials.
- `instance_type` (String) Instance type of the cluster. I.e: For Aws `t3a.xlarge`, for Scaleway `DEV-L`
- `name` (String) Name of the cluster.
- `organization_id` (String) Id of the organization.
- `region` (String) Region of the cluster.

### Optional

- `advanced_settings_json` (String) Advanced settings of the cluster.
- `description` (String) Description of the cluster.
	- Default: ``.
- `disk_size` (Number)
- `features` (Attributes) Features of the cluster. (see [below for nested schema](#nestedatt--features))
- `kubernetes_mode` (String) Kubernetes mode of the cluster.
	- Can be: `K3S`, `MANAGED`.
	- Default: `MANAGED`.
- `max_running_nodes` (Number) Maximum number of nodes running for the cluster. [NOTE: have to be set to 1 in case of K3S clusters]
	- Must be: `>= 1`.
	- Default: `10`.
- `min_running_nodes` (Number) Minimum number of nodes running for the cluster. [NOTE: have to be set to 1 in case of K3S clusters].
	- Must be: `>= 1`.
	- Default: `3`.
- `routing_table` (Attributes Set) List of routes of the cluster. (see [below for nested schema](#nestedatt--routing_table))
- `state` (String) State of the cluster.
	- Can be: `DEPLOYED`, `STOPPED`.
	- Default: `DEPLOYED`.

### Read-Only

- `id` (String) Id of the cluster.

<a id="nestedatt--features"></a>
### Nested Schema for `features`

Optional:

- `static_ip` (Boolean) Static IP (AWS only) [NOTE: can't be updated after creation].
	- Default: `false`.
- `vpc_subnet` (String) Custom VPC subnet (AWS only) [NOTE: can't be updated after creation].
	- Default: `10.0.0.0/16`.


<a id="nestedatt--routing_table"></a>
### Nested Schema for `routing_table`

Required:

- `description` (String) Description of the route.
- `destination` (String) Destination of the route.
- `target` (String) Target of the route.
## Import
```shell
terraform import qovery_cluster.my_cluster "<organization_id>,<cluster_id>"
```